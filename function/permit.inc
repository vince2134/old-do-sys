<?php

/**
 *
 * 権限設定ページのチェックボックスに対応するモジュールのカラム名リスト
 * この関数を使うモジュールはスタッフマスタと権限ページだけ！
 *
 * 変更履歴
 * 1.0.0 (2006.06.08)    新規作成
 * Rev.1.6 (2010.09.04)  hashimoto-y  TOPメニューの配置変更に伴う修正
 *
 * @author      fu      
 *
 * @version     1.0.0 (2007.07.08)
 *
 * @param       type
 * 
 * @return      array   チェックボックスのキーに対応したモジュールの配列
 *
 */
function Permit_Col($type){

    /************/
    /*** 本部 ***/ 
    /************/
    /*** 本部　権限チェック項目<->権限テーブルカラム名 対応一覧 ***/ 
    /* 売上管理 */ 
    // 売上管理 - 受注取引
    $permit_col["h"][1][1][0]   = array(
        "h_2_101",
        "h_2_102",
        //"h_2_103",
        "h_2_104",
        "h_2_105",
        "h_2_106",
        "h_2_107",
        "h_2_108",
        "h_2_109",
        "h_2_110",
        "h_2_130",
        "h_2_132",
        "h_2_133",
    );
    // 売上管理 - 売上取引
    $permit_col["h"][1][2][0]   = array(
        "h_2_201",
        "h_2_202",
        "h_2_203",
        "h_2_205",
        "h_2_206",
        "h_2_207",
        "h_2_208",
        "h_2_209",          //納品書（メモ）設定
    );
    // 売上管理 - 請求管理
    $permit_col["h"][1][3][0]   = array(
        "h_2_301",
        "h_2_302",
        "h_2_303",
        "h_2_304",
        "h_2_306",
        "h_2_307",
        "h_2_308",
        "h_2_309",
    );
    // 売上管理 - 入金管理
    $permit_col["h"][1][4][0]   = array(
        "h_2_401",
        "h_2_402",
        "h_2_403",
        //"h_2_404",
        "h_2_406",
        "h_2_407",
        "h_2_408",
        "h_2_409",
    );
    // 売上管理 - 実績管理
    $permit_col["h"][1][5][0]   = array(
        "h_2_501",
        //"h_2_502",
        "h_2_503",
        //"h_2_504",
    );

    /* 仕入管理 */ 
    // 仕入管理 - 発注取引
    $permit_col["h"][2][1][0]   = array(
        "h_3_101",
        "h_3_102",
        //"h_3_102_2",
        //"h_3_102_3",
        "h_3_103",
        "h_3_104",
        "h_3_105",
        "h_3_106",
    );
    // 仕入管理 - 仕入取引
    $permit_col["h"][2][2][0]   = array(
        "h_3_201",
        "h_3_202",
        //"h_3_202_2",
        "h_3_203",
        "h_3_205",
        "h_3_206",
        "h_3_207",
    );
    // 仕入管理 - 支払管理
    $permit_col["h"][2][3][0]   = array(
        "h_3_301",
        "h_3_302",
        "h_3_303",
        //"h_3_304",
        "h_3_305",
        //"h_3_306",
        "h_3_307",
        "h_3_308",
        );
    // 仕入管理 - 実績管理
    $permit_col["h"][2][4][0]   = array(
        "h_3_401",
        //"h_3_402",
        "h_3_403",
        //"h_3_404",
    );

    /* 在庫管理 */
    // 在庫管理 - 在庫取引
    $permit_col["h"][3][1][0]   = array(
        "h_4_101",
        //"h_4_102",
        "h_4_104",
        "h_4_105",
        //"h_4_106",
        "h_4_107",
        //"h_4_107_1",
        //"h_4_108_2",
        "h_4_109",
        "h_4_110",
        //"h_4_111",
        //"h_4_113",
        "h_4_114",
        "h_4_115",
        //"h_4_115_1",
        //"h_4_115_2",
        "h_4_116",
        //"h_4_125_1",
        //"h_4_125_2",
    );
    // 在庫管理 - 棚卸管理
    $permit_col["h"][3][2][0]   = array(
        "h_4_201",
        "h_4_202",
        "h_4_204",
        "h_4_205",
        //"h_4_206",
        //"h_4_207",
        "h_4_208",
        //"h_4_209",
        "h_4_108",
        "h_4_112",
    );

    /* 更新 */
    // 更新管理
    $permit_col["h"][4][1][0]   = array(null);
    // バッチ表
    $permit_col["h"][4][1][1]   = array(
        "h_5_105",
        "h_5_106",
    );
    // オペレータ入力情報
    $permit_col["h"][4][1][2]   = array(
        "h_5_107",
    );
    // 日次更新履歴
    $permit_col["h"][4][1][3]   = array(
        "h_5_101",
    );
    // 棚卸更新処理
    $permit_col["h"][4][1][4]   = array(
        "h_5_104",
    );
    // 月次更新処理
    $permit_col["h"][4][1][5]   = array(
        "h_5_102",
    );

    /* データ出力 */
    // データ出力 - 統計情報
    $permit_col["h"][5][1][0]   = array(
        "h_6_132",
        "h_6_131",
        "h_6_133",
        "h_6_135",
        "h_6_143",
    );
    // データ出力 - 売上推移
    $permit_col["h"][5][2][0]   = array(
        "h_6_101",
        "h_6_103",
        "h_6_104",
        "h_6_105",
        "h_6_106",
        "h_6_107",
        "h_6_108",
    );
    // データ出力 - ABC分析
    $permit_col["h"][5][3][0]   = array(
        "h_6_110",
        "h_6_111",
        "h_6_112",
        "h_6_113",
        "h_6_114",
    );
    // データ出力 - 仕入推移
    $permit_col["h"][5][4][0]   = array(
        "h_6_121",
        "h_6_122",
    );
    // データ出力 - CSV出力
    $permit_col["h"][5][5][0]   = array(
        "h_6_301",
        "h_6_302",
        "h_6_303",
    );

    /* マスタ設定 */
    // マスタ・設定 - 本部管理マスタ
    $permit_col["h"][6][1][0]   = array(null);
    // 業種
    $permit_col["h"][6][1][1]   = array(
        "h_1_205",
    );
    // 業態
    $permit_col["h"][6][1][2]   = array(
        "h_1_234",
    );
    // 施設
    $permit_col["h"][6][1][3]   = array(
        "h_1_233",
    );
    // サービス
    $permit_col["h"][6][1][4]   = array(
        "h_1_231",
        "h_1_232",
    );
    // 構成品
    $permit_col["h"][6][1][5]   = array(
        "h_1_229",
        //"h_1_229_1",
        "h_1_230",
    );
    // マスタ・設定 - 一部共有マスタ
    $permit_col["h"][6][2][0]   = array(null);
    // Ｍ区分
    $permit_col["h"][6][2][1]   = array(
        "h_1_211",
    );
    // 管理区分
    $permit_col["h"][6][2][2]   = array(
        "h_1_209",
    );
    // 商品分類
    $permit_col["h"][6][2][3]   = array(
        "h_1_235",
    );
    // 商品
    $permit_col["h"][6][2][4]   = array(
        "h_1_220",
        "h_1_221",
    );
    // 単価
    $permit_col["h"][6][2][5]   = array(
        "h_1_222",
    );
    // マスタ・設定 - 個別マスタ
    $permit_col["h"][6][3][0]   = array(null);
    // 倉庫
    $permit_col["h"][6][3][1]   = array(
        "h_1_203",
    );
    // 部署
    $permit_col["h"][6][3][2]   = array(
        "h_1_201",
    );
    // 地区
    $permit_col["h"][6][3][3]   = array(
        "h_1_213",
    );
    // 銀行
    $permit_col["h"][6][3][4]   = array(
        "h_1_207",
        "h_1_208",
        "h_1_210",
    );
    // スタッフ
    $permit_col["h"][6][3][5]   = array(
        "h_1_107",
        "h_1_108",
        "h_1_109",
        "h_1_110",
        "h_1_120",
        //"h_1_120_2",
        "h_1_124",
    );
    // FC・取引先区分
    $permit_col["h"][6][3][6]   = array(
        "h_1_227",
    );
    // FC・取引先
    $permit_col["h"][6][3][7]   = array(
        "h_1_101",
        "h_1_102",
        "h_1_103",
        "h_1_106",
        "h_1_114",
        "h_1_111",
        "h_1_215",
        "h_1_216",
        //"h_1_217",
    );
    // 得意先
    $permit_col["h"][6][3][8]   = array(
        "h_1_113",
        "h_1_115",
    );
    // 直送先
    $permit_col["h"][6][3][9]   = array(
        "h_1_218",
        "h_1_219",
    );
    // 運送業者
    $permit_col["h"][6][3][10]  = array(
        "h_1_225",
    );
    // 製造品
    $permit_col["h"][6][3][11]  = array(
        "h_1_223",
        "h_1_224",
    );
    // マスタ・設定 - 帳票設定
    $permit_col["h"][6][4][0]   = array(null);
    // 発注書コメント
    $permit_col["h"][6][4][1]   = array(
        "h_1_303",
    );
    // 注文書フォーマット
    $permit_col["h"][6][4][2]   = array(
        "h_1_304",
        "h_1_308",
    );
    // 納品書
    $permit_col["h"][6][4][3]   = array(
        "h_1_312",
        "h_1_317",
    );
    // 請求書
    $permit_col["h"][6][4][4]   = array(
        "h_1_310",
        "h_1_310_2",
    );
    // マスタ・設定 - システム設定
    $permit_col["h"][6][5][0]   = array(null);
    // 本部プロフィール
    $permit_col["h"][6][5][1]   = array(
        "h_1_301",
        "h_1_301_2",
        "h_1_301_3",
    );
    // 買掛残高初期設定
    $permit_col["h"][6][5][2]   = array(
        "h_1_305",
    );
    // 売掛残高初期設定
    $permit_col["h"][6][5][3]   = array(
        "h_1_306",
    );
    // 請求残高初期設定
    $permit_col["h"][6][5][4]   = array(
        "h_1_307",
    );

    /**********/
    /*** FC ***/
    /**********/
    /*** FC　権限チェック項目<->権限テーブルカラム名 対応一覧 ***/
    /* 売上管理 */
    // 売上管理 - 予定取引
    $permit_col["f"][1][1][0]   = array(
        //"f_2_101",
        "f_2_101_2",
        //"f_2_101_3",
        //"f_2_102",
        "f_2_102_2",
        //"f_2_102_3",
        "f_2_103",
        "f_2_115",
        "f_2_104",
        //"f_2_105",
        "f_2_106",
        //"f_2_106_2",
        "f_2_107",
        "f_2_108",
        //"f_2_108_2",
        //"f_2_109",
        //"f_2_110",
        "f_2_111",
        "f_2_112",
        "f_2_113",
        "f_2_114",
        "f_2_116",
        "f_1_237",
        "f_1_238",
        "f_2_209",
        "f_2_118",
        "f_2_117",
    );
    // 売上管理 - 売上取引
    $permit_col["f"][1][2][0]   = array(
        "f_2_201",
        "f_2_202",
        //"f_2_203",
        "f_2_204",
        "f_2_205",
        "f_2_206",
        "f_2_207",
        "f_2_208",
        "f_2_210",
        //"f_2_211",
        "f_2_212",
        "f_2_213",
        "f_2_214",
    );
    // 売上管理 - 請求管理
    $permit_col["f"][1][3][0]   = array(
        "f_2_301",
        "f_2_302",
        "f_2_303",
        "f_2_304",
        //"f_2_305",
        "f_2_306",
        "f_2_307",
        "f_2_308",
    );
    // 売上管理 - 入金管理
    $permit_col["f"][1][4][0]   = array(
        "f_2_401",
        "f_2_402",
        "f_2_403",
        //"f_2_404",
        "f_2_406",
        "f_2_408",
        "f_2_409",
        "f_2_405",
        "f_2_410",
        "f_2_411",
        "f_2_412",
        "f_2_413",
        "f_2_414",
        "f_2_415",
    );
    // 売上管理 - 実績管理
    $permit_col["f"][1][5][0]   = array(
        "f_2_501",
        "f_2_502",
        "f_2_503",
        "f_2_504",
    );

    /* 仕入管理 */
    // 仕入管理 - 発注取引
    $permit_col["f"][2][1][0]   = array(
        "f_3_101",
        "f_3_102",
        //"f_3_102_2",
        "f_3_103",
        "f_3_104",
        "f_3_105",
        "f_3_107",
        "f_3_106",
        "f_1_142",
        "f_1_141",
        "f_1_143",
    );
    // 仕入管理 - 仕入取引
    $permit_col["f"][2][2][0]   = array(
        "f_3_201",
        "f_3_202",
        "f_3_203",
        "f_3_205",
        "f_3_206",
    );
    // 仕入管理 - 支払管理
    $permit_col["f"][2][3][0]   = array(
        "f_3_301",
        "f_3_302",
        "f_3_303",
        //"f_3_304",
        "f_3_305",
        "f_3_306",
        "f_3_307",
        "f_3_308",
    );
    // 仕入管理 - 実績管理
    $permit_col["f"][2][4][0]   = array(
        "f_3_401",
        "f_3_402",
        "f_3_403",
        "f_3_404",
    );

    /* 在庫管理 */
    // 在庫管理 - 在庫取引
    $permit_col["f"][3][1][0]   = array(
        "f_4_101",
        "f_4_102",
        "f_4_105",
        "f_4_106",
        "f_4_107",
        //"f_4_107_1",
        "f_4_108_2",
        "f_4_109",
        "f_4_110",
        "f_4_112",
        "f_4_113",
        //"f_4_113_1",
        //"f_4_114",
        //"f_4_114_2",
        //"f_4_115",
        //"f_4_116",
        //"f_4_116_1",
        //"f_4_116_2",
        //"f_4_116_3",
        //"f_4_116_4",
        //"f_4_125_1",
        //"f_4_125_2",
        //"f_4_135_1",
        //"f_4_135_2",
        //"f_4_145_1",
        //"f_4_145_2",
        //"f_4_154_2",
        //"f_4_156_1",
        //"f_4_156_2",
        //"f_4_156_3",
        //"f_4_156_4",
        //"f_4_165",
        //"f_4_166_1",
        //"f_4_166_2",
    );
    // 在庫管理 - 棚卸管理
    $permit_col["f"][3][2][0]   = array(
        "f_4_201",
        "f_4_202",
        "f_4_204",
        "f_4_205",
        //"f_4_205_1",
        //"f_4_206",
        //"f_4_207",
        "f_4_208",
        //"f_4_209",
        "f_4_108",
        "f_4_111",
    );

    /* 更新 */
    // 更新 - 更新管理
    $permit_col["f"][4][1][0]   = array(null);
    // バッチ表
    $permit_col["f"][4][1][1]   = array(
        "f_5_105",
        "f_5_109",
        "f_5_106",
    );
    // オペレータ入力情報
    $permit_col["f"][4][1][2]   = array(
        "f_5_107",
    );
    // 日次更新履歴
    $permit_col["f"][4][1][3]   = array(
        "f_5_101",
    );
    // 棚卸更新処理
    $permit_col["f"][4][1][4]   = array(
        "f_5_104",
    );
    // 月次更新処理
    $permit_col["f"][4][1][5]   = array(
        "f_5_102",
    );

    /* データ出力 */
    // データ出力 - 統計情報
    $permit_col["f"][5][1][0]   = array(
        "f_6_132",
        "f_6_131",
        "f_6_135",
        "f_6_137",
        "f_6_143",
        "f_6_151",
        "f_6_152",
        "f_6_153",
    );
    // データ出力 - 売上推移
    $permit_col["f"][5][2][0]   = array(
        "f_6_100",
        "f_6_101",
        "f_6_102",
        "f_6_103",
        "f_6_104",
        "f_6_105",
        "f_6_107",
        "f_6_106",
        "f_6_108",
    );
    // データ出力 - ABC分析
    $permit_col["f"][5][3][0]   = array(
        "f_6_110",
        "f_6_112",
        "f_6_113",
        "f_6_114",
    );
    // データ出力 - 仕入推移
    $permit_col["f"][5][4][0]   = array(
        "f_6_121",
        "f_6_122",
    );
    // データ出力 - CSV出力
    $permit_col["f"][5][5][0]   = array(
        "f_6_201",
        "f_6_202",
        "f_6_203",
    );

    /* マスタ・設定 */
    // マスタ・設定 - 個別マスタ
    $permit_col["f"][6][1][0]   = array(null);
    // 自社プロフィール
    $permit_col["f"][6][1][1]   = array(
        "f_1_301",
        "f_1_301_2",
        "f_1_301_3",
    );
    // 休日設定
    $permit_col["f"][6][1][2]   = array(
        "f_1_350",
    );
    // 倉庫
    $permit_col["f"][6][1][3]   = array(
        "f_1_203",
    );
    // 本支店
    $permit_col["f"][6][1][4]   = array(
        "f_1_200",
    );
    // 部署
    $permit_col["f"][6][1][5]   = array(
        "f_1_201",
    );
    // 地区
    $permit_col["f"][6][1][6]   = array(
        "f_1_213",
    );
    // 銀行
    $permit_col["f"][6][1][7]   = array(
        "f_1_207",
        "f_1_208",
        "f_1_210",
    );
    // スタッフ
    $permit_col["f"][6][1][8]   = array(
        "f_1_107",
        "f_1_108",
        "f_1_110",
        "f_1_112",
        //"f_1_124",
        "f_1_125",
    );
    // 直送先
    $permit_col["f"][6][1][9]  = array(
        "f_1_218",
        "f_1_219",
    );
    // 運送業者
    $permit_col["f"][6][1][10]  = array(
        "f_1_225",
    );
    // 仕入先
    $permit_col["f"][6][1][11]   = array(
        "f_1_215",
        "f_1_216",
        //"f_1_217",
    );
    // グループ
    $permit_col["f"][6][1][12]   = array(
        "f_1_113",
    );
    // 得意先
    $permit_col["f"][6][1][13]   = array(
        "f_1_101",
        "f_1_102",
        "f_1_103",
        "f_1_106",
    );
    // 契約
    $permit_col["f"][6][1][14]  = array(
        "f_1_111",
        "f_1_115",
        "f_1_104",
        "f_1_105",
        "f_1_114",
        //"f_1_116",
        "f_1_117",
        "f_1_117_2",
        "f_1_118",
        "f_1_118_2",
        "f_1_119",
        "f_1_119_2",
        "f_1_120",
        "f_1_120_2",
        "f_1_239",
        "f_1_240",
        "f_1_242",
    );
    // マスタ・設定 - 一部共有マスタ
    $permit_col["f"][6][2][0]   = array(null);
    // Ｍ区分
    $permit_col["f"][6][2][1]   = array(
        "f_1_211",
    );
    // 管理区分
    $permit_col["f"][6][2][2]   = array(
        "f_1_209",
    );
    // 商品分類
    $permit_col["f"][6][2][3]   = array(
        "f_1_241",
    );
    // 商品
    $permit_col["f"][6][2][4]   = array(
        "f_1_220",
        "f_1_221",
    );
    // 単価
    $permit_col["f"][6][2][5]   = array(
        "f_1_222",
    );
    // マスタ・設定 - 帳票設定
    $permit_col["f"][6][3][0]   = array(null);
    // 発注書コメント
    $permit_col["f"][6][3][1]   = array(
        "f_1_303",
    );
    // 売上伝票
    $permit_col["f"][6][3][2]   = array(
        "f_1_308",
        "f_1_309",
    );
    // 請求書
    $permit_col["f"][6][3][3]   = array(
        "f_1_307",
        "f_1_307_2",
    );
    // マスタ・設定 - 残高初期設定
    $permit_col["f"][6][4][0]   = array(null);
    // 買掛残高初期設定
    $permit_col["f"][6][4][1]   = array(
        "f_1_304",
    );
    // 売掛残高初期設定
    $permit_col["f"][6][4][2]   = array(
        "f_1_305",
    );
    // 請求残高初期設定
    $permit_col["f"][6][4][3]   = array(
        "f_1_306",
    );
    // マスタ・設定 - 本部管理マスタ
    $permit_col["f"][6][5][0]   = array(null);
    // 業種
    $permit_col["f"][6][5][1]   = array(
        "f_1_231",
        //"f_1_231_1",
    );
    // 業態
    $permit_col["f"][6][5][2]   = array(
        "f_1_234",
    );
    // 施設
    $permit_col["f"][6][5][3]   = array(
        "f_1_233",
    );
    // サービス
    $permit_col["f"][6][5][4]   = array(
        "f_1_232",
    );
    // 構成品
    $permit_col["f"][6][5][5]   = array(
        "f_1_229",
        //"f_1_229_1",
        "f_1_230",
    );

    if ($type != "head"){
        unset($permit_col["h"]);
    }

    return $permit_col;

}


/**
 *
 * 権限設定ページのチェックボックスに対応するモジュール名リスト
 *
 * 変更履歴
 * 1.0.0 (2006.12.18)    新規作成
 *
 * @author      fu
 *
 * @version     1.0.0 (2006.12.18)
 *
 * @param       N/A
 *
 * @return      array   チェックボックスのキーに対応したモジュール名
 *
 */
function Permit_Item($type = null){

    /* 本部アイテム */
    $ary_h_mod_data = array(
        "0" =>  array(
            "0" =>  "売上管理",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "受注取引",
                    "1" =>  array(),
                ),
                "1" =>  array(
                    "0" =>  "売上取引",
                    "1" =>  array(),
                ),
                "2" =>  array(
                    "0" =>  "請求管理",
                    "1" =>  array(),
                ),
                "3" =>  array(
                    "0" =>  "入金管理",
                    "1" =>  array(),
                ),
                "4" =>  array(
                    "0" =>  "実績管理",
                    "1" =>  array(),
                ),
            ),
        ),
        "1" =>  array(
            "0" =>  "仕入管理",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "発注取引",
                    "1" =>  array(),
                ),
                "1" =>  array(
                    "0" =>  "仕入取引",
                    "1" =>  array(),
                ),
                "2" =>  array(
                    "0" =>  "支払管理",
                    "1" =>  array(),
                ),
                "3" =>  array(
                    "0" =>  "実績管理",
                    "1" =>  array(),
                ),
            ),
        ),
        "2" =>  array(
            "0" =>  "在庫管理",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "在庫取引",
                    "1" =>  array(),
                ),
                "1" =>  array(
                    "0" =>  "棚卸管理",
                    "1" =>  array(),
                ),
            ),
        ),
        "3" =>  array(
            "0" =>  "更新",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "更新管理",
                    "1" =>  array(
                        "バッチ表",
                        "オペレータ入力情報",
                        "日次更新履歴",
                        "棚卸更新処理",
                        "月次更新処理",
                    ),
                ),
            ),
        ),
        "4" =>  array(
            "0" =>  "データ出力",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "統計情報",
                    "1" =>  array(),
                ),
                "1" =>  array(
                    "0" =>  "売上推移",
                    "1" =>  array(),
                ),
                "2" =>  array(
                    "0" =>  "ABC分析",
                    "1" =>  array(),
                ),
                "3" =>  array(
                    "0" =>  "仕入推移",
                    "1" =>  array(),
                ),
                "4" =>  array(
                    "0" =>  "CSV出力",
                    "1" =>  array(),
                ),
            ),
        ),
        "5" =>  array(
            "0" =>  "マスタ・設定",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "本部管理マスタ",
                    "1" =>  array(
                        "業種",
                        "業態",
                        "施設",
                        "サービス",
                        "構成品",
                    ),
                ),
                "1" =>  array(
                    "0" =>  "一部共有マスタ",
                    "1" =>  array(
                        "Ｍ区分",
                        "管理区分",
                        "商品分類",
                        "商品",
                        "単価",
                    ),
                ),
                "2" =>  array(
                    "0" =>  "個別マスタ",
                    "1" =>  array(
                        "倉庫",
                        "部署",
                        "地区",
                        "銀行",
                        "スタッフ",
                        "FC・取引先区分",
                        "FC・取引先",
                        "得意先",
                        "直送先",
                        "運送業者",
                        "製造品",
                    ),
                ),
                "3" =>  array(
                    "0" =>  "帳票設定",
                    "1" =>  array(
                        "発注書コメント",
                        "注文書フォーマット",
                        "納品書",
                        "請求書",
                    ),
                ),
                "4" =>  array(
                    "0" =>  "システム設定",
                    "1" =>  array(
                        "本部プロフィール",
                        "買掛残高初期設定",
                        "売掛残高初期設定",
                        "請求残高初期設定",
                    ),
                ),
            ),
        ),
    );

    /* FCアイテム */

    // 「契約」の項目名設定
    if ($_SESSION["group_kind"] == "1"){
        $act_name = ($type != "fc") ? "契約" : "契約・代行依頼";
    }else
    if ($_SESSION["group_kind"] == "2"){
        $act_name = "契約";
    }else
    if ($_SESSION["group_kind"] == "3"){
        $act_name = "契約・代行依頼";
    }

    $ary_f_mod_data = array(
        "0" =>  array(
            "0" =>  "売上管理",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "予定取引",
                    "1" =>  array(),
                ),
                "1" =>  array(
                    "0" =>  "売上取引",
                    "1" =>  array(),
                ),
                "2" =>  array(
                    "0" =>  "請求管理",
                    "1" =>  array(),
                ),
                "3" =>  array(
                    "0" =>  "入金管理",
                    "1" =>  array(),
                ),
                "4" =>  array(
                    "0" =>  "実績管理",
                    "1" =>  array(),
                ),
            ),
        ),
        "1" =>  array(
            "0" =>  "仕入管理",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "発注取引",
                    "1" =>  array(),
                ),
                "1" =>  array(
                    "0" =>  "仕入取引",
                    "1" =>  array(),
                ),
                "2" =>  array(
                    "0" =>  "支払管理",
                    "1" =>  array(),
                ),
                "3" =>  array(
                    "0" =>  "実績管理",
                    "1" =>  array(),
                ),
            ),
        ),
        "2" =>  array(
            "0" =>  "在庫管理",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "在庫取引",
                    "1" =>  array(),
                ),
                "1" =>  array(
                    "0" =>  "棚卸管理",
                    "1" =>  array(),
                ),
            ),
        ),
        "3" =>  array(
            "0" =>  "更新",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "更新管理",
                    "1" =>  array(
                        "バッチ表",
                        "オペレータ入力情報",
                        "日次更新履歴",
                        "棚卸更新処理",
                        "月次更新処理",
                    ),
                ),
            ),
        ),
        "4" =>  array(
            "0" =>  "データ出力",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "統計情報",
                    "1" =>  array(),
                ),
                "1" =>  array(
                    "0" =>  "売上推移",
                    "1" =>  array(),
                ),
                "2" =>  array(
                    "0" =>  "ABC分析",
                    "1" =>  array(),
                ),
                "3" =>  array(
                    "0" =>  "仕入推移",
                    "1" =>  array(),
                ),
                "4" =>  array(
                    "0" =>  "CSV出力",
                    "1" =>  array(),
                ),
            ),
        ),
        "5" =>  array(
            "0" =>  "マスタ・設定",
            "1" =>  array(
                "0" =>  array(
                    "0" =>  "個別マスタ",
                    "1" =>  array(
                        "自社プロフィール",
                        "休日設定",
                        "倉庫",
                        "本支店",
                        "部署",
                        "地区",
                        "銀行",
                        "スタッフ",
                        "直送先",
                        "運送業者",
                        "仕入先",
                        "グループ",
                        "得意先",
                        $act_name,
                    ),
                ),
                "1" =>  array(
                    "0" =>  "一部共有マスタ",
                    "1" =>  array(
                        "Ｍ区分",
                        "管理区分",
                        "商品分類",
                        "商品",
                        "単価",
                    ),
                ),
                "2" =>  array(
                    "0" =>  "帳票設定",
                    "1" =>  array(
                        "発注書コメント",
                        "売上伝票",
                        "請求書",
                    ),
                ),
                "3" =>  array(
                    "0" =>  "残高初期設定",
                    "1" =>  array(
                        "買掛残高初期設定",
                        "売掛残高初期設定",
                        "請求残高初期設定",
                    ),
                ),
                "4" =>  array(
                    "0" =>  "本部管理マスタ",
                    "1" =>  array(
                        "業種",
                        "業態",
                        "施設",
                        "サービス",
                        "構成品",
                    ),
                ),
            ),
        ),
    );

    $ary_mod_data[] = $ary_h_mod_data;
    $ary_mod_data[] = $ary_f_mod_data;
    return $ary_mod_data;

}


/**
 *
 * 該当ページの権限チェック
 *
 * 変更履歴
 * 1.0.0 (2006.06.08)    ふ　新規作成
 *
 * @author      ふ
 *
 * @version     1.0.0 (2006.06.08)
 *
 * @param       string      $db_con         DB接続関数
 *
 *
 *
 * @return      array                       [0]権限(string)
 *                                          [1]削除権限(boolean)
 *                                          [2]承認権限(boolean)
 *                                          [3]表示権限のみのメッセージ(string)
 *
 */
function Auth_Check($db_con){

    /*** 使用可能なスタッフか調べる ***/
    $sql = "SELECT staff_id FROM t_staff WHERE staff_id = ".$_SESSION["staff_id"]." AND state = '在職中';";
    $res = Db_Query($db_con, $sql);
    // 存在しないスタッフの場合
    if (pg_num_rows($res) == 0){
        // セッションを破棄する
        session_start();
        session_unset();
        session_destroy();
        // ログイン画面へ遷移
        header("Location: ../top.php");
        exit;
    }
    
    // ログインユーザのスタッフID取得
    $staff_id = $_SESSION["staff_id"];
    
    // ページ名を権限マスタカラム名に変換
    $page_name   = substr($_SERVER[PHP_SELF], strrpos($_SERVER[PHP_SELF], "/")+1);
    $module_name = substr($page_name, 0,  strpos($page_name, "."));
    $column_name = str_replace("-", "_", substr_replace($module_name, substr($module_name, 0, 1) == "1" ? "h" : "f", 0, 1));
        
    // 該当スタッフの該当ページに対する権限を取得
    $sql  = "SELECT $column_name, del_flg, accept_flg FROM t_permit WHERE staff_id = $staff_id;";
    $res  = Db_Query($db_con, $sql);
    $auth = pg_fetch_array($res, 0, PGSQL_NUM);
        
    // 表示権限もないスタッフは専用ページへ遷移
    ($auth[0] != "w" && $auth[0] != "r") ? header("Location: ../../403.php") : null;
        
    // さらに、表示権限もないスタッフはここでexit
    ($auth[0] != "w" && $auth[0] != "r") ? exit : null;  

    // 入力権限の無い場合はメッセージを付加
    ($auth[0] == "r") ? array_push($auth, "表示権限のみ") : null;

    return $auth;

}

?>
