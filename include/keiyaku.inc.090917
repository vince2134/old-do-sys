<?php

/*
 *  ÊÑ¹¹ÍúÎò
 *  ÆüÉÕ            Ã´Åö¼Ô      ÆâÍÆ
 *  -----------------------------------------------------------
 *  2006/12/15      suzuki      ·î¤Î¼þ´ü¤ÎvalueÃÍÄÉ²Ã
 *  2009/09/09      aoyama-n    ÃÍ°úµ¡Ç½ÄÉ²Ã
*/

/**************************************************
´ðËÜ¾ðÊó
**************************************************/
//·ÀÌó½èÍýÈ½Äê
//¸ÜµÒÌ¾
$form_client[] =& $form->createElement(
		        "text","cd1","","size=\"7\" maxLength=\"6\" style=\"$g_form_style\" onChange=\"javascript:Change_Submit('client_search_flg','#','true','form_client[cd2]')\" onkeyup=\"changeText(this.form,'form_client[cd1]','form_client[cd2]',6)\"".$g_form_option."\""
	        );
$form_client[] =& $form->createElement("static","","","-");
$form_client[] =& $form->createElement(
		        "text","cd2","","size=\"4\" maxLength=\"4\" style=\"$g_form_style\" onChange=\"javascript:Button_Submit('client_search_flg','#','true')\"".$g_form_option."\""
	        );
$form_client[] =& $form->createElement("text","name","","size=\"34\" $g_text_readonly");
$freeze_data = $form->addGroup( $form_client, "form_client", "");


if($flg == 'add'){
	//ÄÉ²Ã
	//¸ÜµÒÌ¾¥ê¥ó¥¯
	$form->addElement("link","form_client_link","","./2-1-104.php","¸ÜµÒÌ¾","
	    onClick=\"return Open_SubWin('../dialog/2-0-250.php',Array('form_client[cd1]','form_client[cd2]','form_client[name]', 'client_search_flg'),500,450,5,1);\""
	);

}else{
	$form->addElement("static","form_client_link","","¸ÜµÒÌ¾");
	//ÊÑ¹¹¡¦Ê£¼ÌÄÉ²Ã¤Î¾ì¹ç¤Ï¥Õ¥ê¡¼¥ºÉ½¼¨
	$freeze_data->freeze();
}


//·ÀÌó¾õÂÖ
$state_ary[] =& $form->createElement("radio",NULL,NULL, "¼è°úÃæ","1");
$state_ary[] =& $form->createElement("radio",NULL,NULL, "²òÌó¡¦µÙ»ßÃæ","2");
$form->addGroup($state_ary, "state", "·ÀÌó¾õÂÖ");


//¾Ò²ðÎÁ¤ÎÍ­Ìµ
$intro_ary1[] =& $form->createElement("radio",NULL,NULL, "È¯À¸¤¹¤ë¡§¸ÇÄê³Û","2");
$form->addGroup($intro_ary1, "intro_ac_div[]", "¾Ò²ð¸ýºÂÎÁ");

$intro_ary2[] =& $form->createElement("radio",NULL,NULL, "È¯À¸¤¹¤ë¡§Çä¾å¤Î","3");
$form->addGroup($intro_ary2, "intro_ac_div[]", "¾Ò²ð¸ýºÂÎÁ");

$intro_ary3[] =& $form->createElement("radio",NULL,NULL, "È¯À¸¤¹¤ë¡§¾¦ÉÊÊÌ¤Ë»ØÄê","4");
$form->addGroup($intro_ary3, "intro_ac_div[]", "¾Ò²ð¸ýºÂÎÁ");

$intro_ary4[] =& $form->createElement("radio",NULL,NULL, "È¯À¸¤·¤Ê¤¤","1");
$form->addGroup($intro_ary4, "intro_ac_div[]", "¾Ò²ð¸ýºÂÎÁ");

//¾Ò²ðÎÁ
$form->addElement("text","intro_ac_price","±ß",'class="money_num" size="7" maxLength="6"'.$g_form_option);
$form->addElement("text","intro_ac_rate" ,"¡ó",'class="num"       size="7" maxLength="3"'.$g_form_option);


//·ÀÌóÆü
Addelement_Date($form,"form_contract_day","·ÀÌóÆü","-");


//ÆÀ°ÕÀèÁªÂò»þ¤ËÉ½¼¨
if($client_id != NULL){
	//ÀÁµáÀè
	$select_value = NULL;

	$sql  = "SELECT";
	$sql .= "   t_claim.claim_id || ',' || t_claim.claim_div, ";      //ÀÁµáÀèID,ÀÁµáÀè¶èÊ¬
	$sql .= "   t_client.client_cd1 || '-' ||t_client.client_cd2, ";  //ÀÁµáÀèCD
	$sql .= "   t_client.client_cname,";                              //ÀÁµáÀè£±
	$sql .= "   t_claim.claim_div ";                                  //ÀÁµáÀè¶èÊ¬
	$sql .= " FROM";
	$sql .= "   t_claim ";
	$sql .= "   INNER JOIN t_client ON t_client.client_id = t_claim.claim_id ";
	$sql .= " WHERE";
	$sql .= "   t_claim.claim_div = '1' ";
	$sql .= " AND ";
	$sql .= "   t_claim.client_id = $client_id ";
	$sql .= "UNION ";
	$sql .= "SELECT";
	$sql .= "   t_claim.claim_id || ',' || t_claim.claim_div, "; //ÀÁµáÀèID,ÀÁµáÀè¶èÊ¬
	$sql .= "   t_client.client_cd1 || '-' || t_client.client_cd2, ";   //ÀÁµáÀèCD
	$sql .= "   t_client.client_cname,";                         //ÀÁµáÀè£²
	$sql .= "   t_claim.claim_div ";                             //ÀÁµáÀè¶èÊ¬
	$sql .= " FROM";
	$sql .= "   t_claim ";
	$sql .= "   INNER JOIN t_client ON t_client.client_id = t_claim.claim_id ";
	$sql .= " WHERE";
	$sql .= "   t_claim.claim_div = '2' ";
	$sql .= " AND ";
	$sql .= "   t_claim.client_id = $client_id";
	$sql .= " ORDER BY claim_div ";
	$sql .= ";";
	$result = Db_Query($db_con, $sql); 
	while($claim_list = pg_fetch_array($result)){
		$claim_list[0] = htmlspecialchars($claim_list[0]);
		$claim_list[1] = htmlspecialchars($claim_list[1]);
		$claim_list[2] = htmlspecialchars($claim_list[2]);
		$select_value[$claim_list[0]] = $claim_list[1]." ¡§ ".$claim_list[2];
	}
	$form->addElement('select', 'form_claim','¥»¥ì¥¯¥È¥Ü¥Ã¥¯¥¹',$select_value, $g_form_option_select);

	//²èÌÌ¹¹¿·¥Õ¥é¥°
	$form->addElement("hidden","renew_flg","1"); 
}

/**************************************************
//Âå¹Ô
**************************************************/
//FC¡¦Ä¾±ÄÈ½Äê
if($group_kind == 2){
	//Ä¾±Ä
	//ÆÀ°ÕÀè¤¬»ØÄê¤µ¤ì¤¿¾ì¹ç
	if($client_id != NULL){
		//$daiko_js = "onClick=\"javascript:daiko_checked(); Mult_double_All('$coax',false,'$daiko_coax'); \"";
		$daiko_js = "onClick=\"javascript:daiko_checked(); Act_Request_Rate('$coax',false,'$daiko_coax'); \"";
		//$daiko_js = "onClick=\"javascript:daiko_checked();\"";
		//$daiko_js = "onClick=\"Mult_double_All('$coax',false,'$daiko_coax'); \"";
	}

	//Âå¹Ô°ÍÍê¥Á¥§¥Ã¥¯¥Ü¥Ã¥¯¥¹
	$form_daiko = NULL;
	$form_daiko[] =& $form->createElement("radio", NULL, NULL, "¼«¼Ò½ä²ó¡¡¡¡¡¡", "1",$daiko_js);
	$form_daiko[] =& $form->createElement("radio", NULL, NULL, "¥ª¥ó¥é¥¤¥óÂå¹Ô", "2",$daiko_js);
	$form_daiko[] =& $form->createElement("radio", NULL, NULL, "¥ª¥Õ¥é¥¤¥óÂå¹Ô", "3",$daiko_js);
	$form->addGroup($form_daiko, "daiko_check", "Âå¹Ô¶èÊ¬");

	//$act_div_js = "onClick=\"t_price_readonly(this.value); Mult_double4('form_goods_num1','form_sale_price','form_sale_amount','form_trade_price','form_trade_amount','form_issiki','$coax','$daiko_coax'); \"";
	$act_div_js = "onClick=\"t_price_readonly('$coax',this.value,'$daiko_coax'); Act_Request_Rate('$coax',false,'$daiko_coax');\"";

	//Âå¹ÔÎÁ¤ÎÍ­Ìµ
	$act_div_ary1[] =& $form->createElement("radio",NULL,NULL, "È¯À¸¤¹¤ë¡§¸ÇÄê³Û","2",$act_div_js);
	$form->addGroup($act_div_ary1, "act_div[]", "Âå¹Ô°ÑÂ÷ÎÁ");
	
	$act_div_ary2[] =& $form->createElement("radio",NULL,NULL, "È¯À¸¤¹¤ë¡§Çä¾å¤Î","3",$act_div_js);
	$form->addGroup($act_div_ary2, "act_div[]", "Âå¹Ô°ÑÂ÷ÎÁ");
	
	$act_div_ary3[] =& $form->createElement("radio",NULL,NULL, "È¯À¸¤·¤Ê¤¤","1",$act_div_js);
	$form->addGroup($act_div_ary3, "act_div[]", "Âå¹Ô°ÑÂ÷ÎÁ");

	//Âå¹ÔÎÁ
	/*
	$form->addElement("text","act_request_price","±ß",'class="money_num" size="7" maxLength="6"'.$g_form_option
	 ."onKeyup=\"Mult_double4('form_goods_num1','form_sale_price','form_sale_amount','form_trade_price','form_trade_amount','form_issiki','$coax','$daiko_coax');\""
	);
	*/
	$form->addElement("text","act_request_price","±ß",'class="money_num" size="7" maxLength="6"'.$g_form_option);
	$form->addElement("text","act_request_rate" ,"¡ó",'class="num"       size="7" maxLength="3"'.$g_form_option
	 //."onKeyup=\"Mult_double4('form_goods_num1','form_sale_price','form_sale_amount','form_trade_price','form_trade_amount','form_issiki','$coax','$daiko_coax');\""
	 ."onKeyup=\"Act_Request_Rate('$coax',false,'$daiko_coax');\""
	);


	//Âå¹ÔÎÁ
	//$form->addElement("text","act_request_price","±ß",'class="money_num" size="7" maxLength="6"'.$g_form_option);
	//$form->addElement("text","act_request_rate" ,"¡ó",'class="num"       size="7" maxLength="3"'.$g_form_option);

/*
	//Âå¹ÔÎÁ
	$form->addElement("text","form_daiko_price","",'size="7" maxLength="10"'.$g_form_option." style='text-align:right; ime-mode:disabled;' onKeyup=\"Mult_double4('form_goods_num1','form_sale_price','form_sale_amount','form_trade_price','form_trade_amount','form_issiki','$coax','$daiko_coax');\"");
*/

	//¼õÂ÷Àè ¡ÊFC¡Ë¥³¡¼¥É
	$form_daiko = NULL;
	$form_daiko[] =& $form->createElement(
		        "text","cd1","","size=\"7\" maxLength=\"6\" style=\"$g_form_style\" onChange=\"javascript:Change_Submit('daiko_search_flg','#','true','form_daiko[cd2]')\" onkeyup=\"changeText(this.form,'form_daiko[cd1]','form_daiko[cd2]',6)\"".$g_form_option."\""
		        );

	$form_daiko[] =& $form->createElement("static","","","-");
	$form_daiko[] =& $form->createElement(
		        "text","cd2","","size=\"4\" maxLength=\"4\" style=\"$g_form_style\" onChange=\"javascript:Button_Submit('daiko_search_flg','#','true')\"".$g_form_option."\""
		        );
	$form_daiko[] =& $form->createElement(
	    "text","name","",
	    "size=\"34\" $g_text_readonly"
	);
	$form->addGroup( $form_daiko, "form_daiko", "");

	//¼õÂ÷Àè¥ê¥ó¥¯
	$form->addElement("link","form_daiko_link","","./2-1-104.php","Âå¹ÔÀè","
	    onClick=\"return Open_SubWin('../../franchise/dialog/2-0-251.php',Array('form_daiko[cd1]','form_daiko[cd2]','form_daiko[name]', 'daiko_search_flg'),500,450,5,'daiko');\""
	);

	//¼õÂ÷Àè°¸È÷¹Í
	$form->addElement("textarea","form_daiko_note","",'size="30" maxLength="100" cols="40"'.$g_form_option_area);

}

/**************************************************
½ä²óÆü
**************************************************/
//¥»¥ì¥¯¥È¥Ü¥Ã¥¯¥¹ÍÑ
//ABCD½µ
$array_abcd_week = array(
	"" => "",
	"1" => "A¡¡(4½µ´Ö³Ö)",
	"2" => "B¡¡(4½µ´Ö³Ö)",
	"3" => "C¡¡(4½µ´Ö³Ö)",
	"4" => "D¡¡(4½µ´Ö³Ö)",
	"5" => "A , C¡¡(2½µ´Ö³Ö)",
	"6" => "B , D¡¡(2½µ´Ö³Ö)",
	"21" => "A¡¡(8½µ´Ö³Ö)",
	"22" => "B¡¡(8½µ´Ö³Ö)",
	"23" => "C¡¡(8½µ´Ö³Ö)",
	"24" => "D¡¡(8½µ´Ö³Ö)",
	
);

//ÉáÄÌ¤Î½µ
$array_week = array(
	"" => "",
	"1" => "1",
	"2" => "2",
	"3" => "3",
	"4" => "4"
);

//¡û½µ´Ö¼þ´ü
$array_while_week = array(
	""   => "",
	"1"  => "1",
	"2"  => "2",
	"3"  => "3",
	"4"  => "4",
	"5"  => "5",
	"6"  => "6",
	"7"  => "7",
	"8"  => "8",
	"9"  => "9",
	"12" => "12",
	"18" => "18",
	"24" => "24"
);

//52½µ´Ö¼þ´ü
$array_while_week2[""] = "";
for($w=1;$w<=52;$w++){
	$array_while_week2["$w"] = $w;
}

//1¡Á29Æü¡Ü·îËö
$array_week_interval[0] = "";
for($i=1;$i<29;$i++){
	$array_week_interval[$i] = $i;
}
$array_week_interval[30] = '·îËö';


//ÍËÆü
$array_week_rday = array(
	"" => "",
	"1" => "·î",
	"2" => "²Ð",
	"3" => "¿å",
	"4" => "ÌÚ",
	"5" => "¶â",
	"6" => "ÅÚ",
	"7" => "Æü"
);

$need_mark = "<b><font color=\"#ff0000\">¢¨</font></b>";
$readonly = "style=\"border : #ffffff 1px solid; background-color: #ffffff;\" readonly";

//¿·µ¬¤«Ê£¼Ì¤Î¾ì¹ç¤Ï·ÀÌóÈ¯¸úÆü¤òÉ¬¿ÜÆþÎÏ
if($init_type == "¿·µ¬" || $init_type == "Ê£¼Ì"){
    //javascript(ÆüÉÕ¤Ë¹ç¤ï¤»¤ÆÍËÆü¤òÉ½¼¨¤¹¤ë)
    $option =" onkeyup=\"date_week(this.form,'form_stand_day[y]','form_stand_day[m]','form_stand_day[d]','form_week_rday4')\"";
    $option.=" onClick=\"date_week(this.form,'form_stand_day[y]','form_stand_day[m]','form_stand_day[d]','form_week_rday4')\"";

	Addelement_Date($form,"form_stand_day","·ÀÌóÈ¯¸úÆü".$need_mark,"-","y","m","d","$option"); 
	Addelement_Date($form,"form_update_day","½¤ÀµÈ¯¸úÆü<b>¡¡</b>","-","y","m","d","disabled");

//¤½¤ÎÂ¾¤Î¾ì¹ç¤Ï½¤ÀµÈ¯¸úÆü¤òÉ¬¿ÜÆþÎÏ
}else{
    //javascript(ÆüÉÕ¤Ë¹ç¤ï¤»¤ÆÍËÆü¤òÉ½¼¨¤¹¤ë)
    $option =" onkeyup=\"date_week(this.form,'form_update_day[y]','form_update_day[m]','form_update_day[d]','form_week_rday4')\"";
    $option.=" onClick=\"date_week(this.form,'form_update_day[y]','form_update_day[m]','form_update_day[d]','form_week_rday4')\"";

	Addelement_Date($form,"form_stand_day","·ÀÌóÈ¯¸úÆü<b>¡¡</b>","-","y","m","d","$readonly");
	Addelement_Date($form,"form_update_day","½¤ÀµÈ¯¸úÆü".$need_mark,"-","y","m","d","$option");
}


//·ÀÌó½ªÎ»Æü
Addelement_Date($form,"form_contract_eday","·ÀÌó½ªÎ»Æü<b>¡¡</b>","-");

//½ä²óÆü(1)
$form->addElement('select', 'form_abcd_week1', '(1)', $array_abcd_week, $g_form_option_select);
$form->addElement('select', 'form_week_rday1', '(1)', $array_week_rday, $g_form_option_select);

//½ä²óÆü(2)
$form->addElement('select', 'form_rday2', '(2)', $array_week_interval, $g_form_option_select);

//½ä²óÆü(3)
$form->addElement('select', 'form_cale_week3', '(3)', $array_week, $g_form_option_select);
$form->addElement('select', 'form_week_rday3', '(3)', $array_week_rday, $g_form_option_select);

//½ä²óÆü(4)
$form->addElement('select', 'form_cale_week4', '(4)', $array_while_week2, $g_form_option_select);
$form->addElement("text","form_week_rday4","(4)",'size="1" maxLength="2" class="Textbox_readonly" readonly');

//½ä²óÆü(5)
$form->addElement('select', 'form_cale_month5', '(5)', $array_while_week, $g_form_option_select);
$form->addElement('select', 'form_week_rday5', '(5)', $array_week_interval, $g_form_option_select);

//½ä²óÆü(6)
$form->addElement('select', 'form_cale_month6', '(6)', $array_while_week, $g_form_option_select);
$form->addElement('select', 'form_cale_week6', '(6)', $array_week, $g_form_option_select);
$form->addElement('select', 'form_week_rday6', '(6)', $array_week_rday, $g_form_option_select);

//½ä²óÆü¥é¥¸¥ª¥Ü¥¿¥ó
for($i=0;$i<7;++$i){
	$form_round_div1 = "";
	$r_value = $i+1;
	$form_round_div1[] =& $form->createElement("radio", NULL,NULL, "($r_value)", $r_value,"onClick=\"return Check_read('$r_value');\"");
	$form->addGroup($form_round_div1, "form_round_div1[]");
}

/**************************************************
½ä²óÃ´Åö¼Ô
**************************************************/
//NO
$form->addElement("text","form_line","¥Æ¥­¥¹¥È¥Õ¥©¡¼¥à",'style="ime-mode: disabled;" size="3" maxLength="3" '.$g_form_option);

//½ä²óÃ´Åö
$form_c_staff_id = Select_Get($db_con,'round_staff_m');
$form->addElement('select', 'form_c_staff_id1', '½ä²óÃ´Åö1', $form_c_staff_id, $g_form_option_select);
$form->addElement('select', 'form_c_staff_id2', '½ä²óÃ´Åö2', $form_c_staff_id, $g_form_option_select);
$form->addElement('select', 'form_c_staff_id3', '½ä²óÃ´Åö3', $form_c_staff_id, $g_form_option_select);
$form->addElement('select', 'form_c_staff_id4', '½ä²óÃ´Åö4', $form_c_staff_id, $g_form_option_select);

//Çä¾å
$form->addElement("text","form_sale_rate1","Çä¾åÎ¨1",'style="ime-mode:disabled;text-align:right;" size="3" maxLength="3"' .$g_form_option);
$form->addElement("text","form_sale_rate2","Çä¾åÎ¨2",'style="ime-mode:disabled;text-align:right;" size="3" maxLength="3"' .$g_form_option);
$form->addElement("text","form_sale_rate3","Çä¾åÎ¨3",'style="ime-mode:disabled;text-align:right;" size="3" maxLength="3"' .$g_form_option);
$form->addElement("text","form_sale_rate4","Çä¾åÎ¨4",'style="ime-mode:disabled;text-align:right;" size="3" maxLength="3"' .$g_form_option);

//½çÏ©
$form_route[] =& $form->createElement("text","1","¥Æ¥­¥¹¥È¥Õ¥©¡¼¥à",'style="ime-mode:disabled;" size="1" maxLength="2" onkeyup="changeText(this.form,\'form_route_load[1]\',\'form_route_load[2]\',2)" '.$g_form_option);
$form_route[] =& $form->createElement("text","2","¥Æ¥­¥¹¥È¥Õ¥©¡¼¥à",'style="ime-mode:disabled;" size="1" maxLength="2" '.$g_form_option);
$form->addGroup( $form_route,"form_route_load","form_route_load","-");

//È÷¹Í
$form->addElement("textarea","form_note","",'size="30" maxLength="100" cols="40"'.$g_form_option_area);


/**************************************************
½ä²ó¾¦ÉÊ
**************************************************/

$f_option_read  = " style=\"color : #000000; border : #ffffff 1px solid; background-color: #ffffff; text-align: right\" readonly";
$g_form_option_num = $g_form_option." style=\"text-align: right\"";

$num = 5;
$type = $g_form_option;
$array_divide = Select_Get($db_con, "divide_con");

for ($i=1; $i<=$num; $i++){

	//ÈÎÇä¶èÊ¬
	$form->addElement('select', "form_divide[".$i."]", "", $array_divide, $g_form_option_select);

	//¥µ¡¼¥Ó¥¹°ì¼°¡Ê¥Á¥§¥Ã¥¯¥Ü¥Ã¥¯¥¹¡Ë
	$form->addElement( "checkbox","form_issiki[".$i."]" ,"" ,"","onClick=\"Set_num('$i','$coax','$daiko_coax');\"");

	//¥µ¡¼¥Ó¥¹
	$array_serv = Select_Get($db_con, "serv_con");
	$form->addElement('select', "form_serv[".$i."]", "", $array_serv, $g_form_option_select);


	//¾¦ÉÊÌ¾¡ÊÀµ¼°Ì¾¡Ë
	if($_POST["hdn_name_change1"][$i] == '2' || $hdn_name_change[1][$i] == '2'){
		//ÉÔ²Ä
		$form->addElement("text","official_goods_name[".$i."]","Àµ¼°","size=\"42\" $g_text_readonly" );
	}else{
		//²Ä
		$form->addElement("text","official_goods_name[".$i."]","Àµ¼°","size=\"42\" maxLength=\"41\" style=\"$style\" $type");
	}

	//¥Þ¥¹¥¿¤È¤ÎÆ±´ü
	$form->addElement( "checkbox","mst_sync_flg[".$i."]" ,"");

    //aoyama-n 2009-09-09
	$form->addElement("hidden","hdn_discount_flg[$i]");

	for($s=1;$s<=3;$s++){

		//ÅÁÉ¼°õ»ú
		$form->addElement( "checkbox","form_print_flg".$s."[".$i."]" ,"");

		//¾¦ÉÊ¥³¡¼¥É      
	    $form->addElement(
	        "text","form_goods_cd".$s."[$i]","","size=\"10\" maxLength=\"8\"
	        style=\"$g_form_style;$style\" $type
	        onChange=\"c_goods_search(this.form, 'form_goods_cd".$s."', 'goods_search_row', $i$s,'keiyaku')\""
	    );
		

		//¾¦ÉÊÌ¾¡ÊÎ¬¾Î¡Ë
		//ÊÑ¹¹ÉÔ²ÄÈ½Äê
	    if($_POST["hdn_name_change".$s][$i] == '2' || $hdn_name_change[$s][$i] == '2'){
			//ÉÔ²Ä
		    $form->addElement("text","form_goods_name".$s."[$i]","Î¬¾Î","size=\"30\" $g_text_readonly" );
	    }else{
			//²Ä
		    $form->addElement("text","form_goods_name".$s."[$i]","Î¬¾Î","size=\"30\" maxLength=\"20\" style=\"$style\" $type");
	    }

		//¾¦ÉÊ¼±ÊÌÈ½Äê
		if($s == 2){

			//ËÜÂÎ¾¦ÉÊ
			//FC¡¦Ä¾±ÄÈ½Äê
			if($group_kind == 2){
				//Ä¾±Ä
				$form->addElement(
			"link","form_search".$s."[".$i."]","","#","¸¡º÷",
			"onClick=\"return Open_SubWin('../dialog/2-0-210.php', Array('form_goods_cd".$s."[$i]','goods_search_row'), 500, 450,7,$client_h_id,$i$s,'keiyaku','daiko_check');\""
		);
			}else{
				//FC
				$form->addElement(
			"link","form_search".$s."[".$i."]","","#","¸¡º÷",
			"onClick=\"return Open_SubWin('../dialog/2-0-210.php', Array('form_goods_cd".$s."[$i]','goods_search_row'), 500, 450,7,$client_h_id,$i$s,'keiyaku');\""
		);
			}
		}else{
			//¥¢¥¤¥Æ¥à¡¦¾ÃÌ×ÉÊ
			//FC¡¦Ä¾±ÄÈ½Äê
			if($group_kind == 2){
				//Ä¾±Ä
				$form->addElement(
				"link","form_search".$s."[".$i."]","","#","¸¡º÷",
				"onClick=\"return Open_SubWin('../dialog/2-0-210.php', Array('form_goods_cd".$s."[$i]','goods_search_row'), 500, 450,6,$client_h_id,$i$s,'keiyaku','daiko_check');\""
			);
			}else{
				//FC
				$form->addElement(
				"link","form_search".$s."[".$i."]","","#","¸¡º÷",
				"onClick=\"return Open_SubWin('../dialog/2-0-210.php', Array('form_goods_cd".$s."[$i]','goods_search_row'), 500, 450,6,$client_h_id,$i$s,'keiyaku');\""
			);
			}
		}

		//¾¦ÉÊ¿ô
		if($s == 1){
			/*
			//FC¡¦Ä¾±ÄÈ½Äê
			if($group_kind == 2){
				//Ä¾±Ä

				//¥¢¥¤¥Æ¥à
			 	$form->addElement(
		            "text","form_goods_num".$s."[$i]","",
		            "class=\"money_num\" size=\"6\" maxLength=\"5\" 
		            onKeyup=\"Mult_double3('form_goods_num1[$i]','form_sale_price[$i][1]','form_sale_price[$i][2]','form_sale_amount[$i]','form_trade_price[$i][1]','form_trade_price[$i][2]','form_trade_amount[$i]','form_issiki[$i]','$coax',false,$i,'','$daiko_coax');\"
		            style=\"$g_form_style;$style\" $type"
		        );
			}else{
				//£Æ£Ã
			*/
				//¥¢¥¤¥Æ¥à¿ôÎÌ
			if($group_kind == 2){
				$mult_double = "Act_Request_Rate('$coax',false,'$daiko_coax','$i');";

			}else{
				$mult_double = "Mult_double2('form_goods_num1[$i]','form_sale_price[$i][1]','form_sale_price[$i][2]','form_sale_amount[$i]','form_trade_price[$i][1]','form_trade_price[$i][2]','form_trade_amount[$i]','form_issiki[$i]','$coax',false);";
			}

			 	$form->addElement(
		            "text","form_goods_num".$s."[$i]","",
		            "class=\"money_num\" size=\"6\" maxLength=\"5\" 
		            onKeyup=\"$mult_double\"
		            style=\"$g_form_style;$style\" $type"
		        );
			//}
		}else{
			//¾ÃÌ×ÉÊ¡¦ËÜÂÎ
			$form->addElement(
	            "text","form_goods_num".$s."[$i]","",
	            " size=\"3\" maxLength=\"3\" 
	            style=\"text-align:right; $g_form_style;$style\" $type"
	        );
		}

		//¾¦ÉÊID
		$form->addElement("hidden","hdn_goods_id".$s."[$i]");
		//ÉÊÌ¾ÊÑ¹¹¥Õ¥é¥°
		$form->addElement("hidden","hdn_name_change".$s."[$i]");

		/**************************************************
		¥¨¥é¡¼É½¼¨ÉôÉÊÄêµÁ
		**************************************************/
		//¾ÃÌ×ÉÊ¥¨¥é¡¼É½¼¨
		$form->addElement("text","error_goods_num3[".$i."]","","size=\"17\" maxLength=\"10\"");
		//ËÜÂÎ¾¦ÉÊ¥¨¥é¡¼É½¼¨
		$form->addElement("text","error_goods_num2[".$i."]","","size=\"17\" maxLength=\"10\"");

	}

	//¥¯¥ê¥¢¥ê¥ó¥¯ºîÀ®
	$form->addElement(
		"link","clear_line[".$i."]","",$_SERVER[PHP_SELF],"¥¯¥ê¥¢","onClick=\"Javascript:Clear_Line_Data('$i');return false;\""
	);

	/*
	//FC¡¦Ä¾±ÄÈ½Äê
	if($group_kind == 2){
		//Ä¾±Ä

		//Âå¹Ô¤Î¾ì¹ç¤Ï¡¢ÆÉ¤ß¼è¤ê¤Ê¤Î¤ÇÇØ·Ê¤ò²«¿§¤Ë¤·¤Ê¤¤
		if($daiko_div != 1){
			$type = NULL;
		}

		//±Ä¶È¸¶²Á
		$form_cost_price[$i][] =& $form->createElement(
		        "text","1","",
		        "size=\"9\" maxLength=\"8\"
		        class=\"money\"
		        onKeyup=\"Mult_double3('form_goods_num1[$i]','form_sale_price[$i][1]','form_sale_price[$i][2]','form_sale_amount[$i]','form_trade_price[$i][1]','form_trade_price[$i][2]','form_trade_amount[$i]','form_issiki[$i]','$coax',false,$i,'','$daiko_coax');\"
		        style=\"$g_form_style;text-align: right; $style\"
		        $type"
		    );
		    $form_cost_price[$i][] =& $form->createElement(
		        "text","2","","size=\"1\" maxLength=\"2\" 
		        onKeyup=\"Mult_double3('form_goods_num1[$i]','form_sale_price[$i][1]','form_sale_price[$i][2]','form_sale_amount[$i]','form_trade_price[$i][1]','form_trade_price[$i][2]','form_trade_amount[$i]','form_issiki[$i]','$coax',true,$i,'','$daiko_coax');\"
		        style=\"$g_form_style;text-align: left; $style\"
		        $type"
		    );
	    $form->addGroup( $form_cost_price[$i], "form_trade_price[$i]", "",".");

		//±Ä¶È¸¶²Á°Ê³°¤Ï·ÀÌó¶èÊ¬¤Ë¤è¤Ã¤Æ¥Õ¥©¡¼¥à¤¬ÊÑ¤ï¤é¤Ê¤¤
		$type = $g_form_option;

		//¸¶²Á¹ç·×³Û
	    $form->addElement(
	        "text","form_trade_amount[$i]","",
	        "size=\"17\" maxLength=\"10\" 
	        style=\"color : #000000; 
	        border : #ffffff 1px solid; 
	        background-color: #ffffff; 
	        text-align: right\" readonly'"
	    );

		//Çä¾åÃ±²Á
		$form_sale_price[$i][] =& $form->createElement(
		        "text","1","",
		        "size=\"9\" maxLength=\"8\"
		        class=\"money\"
		        onKeyup=\"Mult_double3('form_goods_num1[$i]','form_sale_price[$i][1]','form_sale_price[$i][2]','form_sale_amount[$i]','form_trade_price[$i][1]','form_trade_price[$i][2]','form_trade_amount[$i]','form_issiki[$i]','$coax',false,$i,'','$daiko_coax');\"
		        style=\"$g_form_style;text-align: right; $style\"
		        $type"
		    );
		    $form_sale_price[$i][] =& $form->createElement(
		        "text","2","","size=\"1\" maxLength=\"2\" 
		        onKeyup=\"Mult_double3('form_goods_num1[$i]','form_sale_price[$i][1]','form_sale_price[$i][2]','form_sale_amount[$i]','form_trade_price[$i][1]','form_trade_price[$i][2]','form_trade_amount[$i]','form_issiki[$i]','$coax',true,$i,'','$daiko_coax');\"
		        style=\"$g_form_style;text-align: left; $style\"
		        $type"
		    );
	    $form->addGroup( $form_sale_price[$i], "form_sale_price[$i]", "",".");

		//Çä¾å¹ç·×³Û
		$form->addElement("text","form_sale_amount[$i]","",'class="amount"');

		//¸ýºÂÎÁ
		$form_aprice_div0[$i][] =& $form->createElement("radio",NULL,NULL, "<font color=#555555>¤Ê¤·</font>","1");
		//¾Ò²ð¸ýºÂÀè»ØÄêÈ½Äê
		if($client_ac_id == NULL){
			//¸ýºÂÎÁ»ØÄêÉÔ²Ä
			$form_aprice_div0[$i][] =& $form->createElement("radio",NULL,NULL, "<font color=#555555>¸ÇÄê³Û</font>","2","disabled");
			$form_aprice_div0[$i][] =& $form->createElement("radio",NULL,NULL, "<font color=#555555>Çä¾å¤Î</font>","3","disabled");
			$form->addElement("text","form_account_price[$i]","",'size="7" maxLength="6"'.$g_form_option." class=\"money_num\" style='text-align:right; ime-mode:disabled; background-color:gainsboro;' disabled");
	        $form->addElement("text","form_account_rate[$i]","",'size="7" maxLength="6" '.$g_form_option." style='text-align:right; ime-mode:disabled; background-color:gainsboro;' disabled");
		}else{
			//¸ýºÂÎÁ»ØÄê²Ä
			$form_aprice_div0[$i][] =& $form->createElement("radio",NULL,NULL, "<font color=#555555>¸ÇÄê³Û</font>","2");
			$form_aprice_div0[$i][] =& $form->createElement("radio",NULL,NULL, "<font color=#555555>Çä¾å¤Î</font>","3");
			$form->addElement("text","form_account_price[$i]","",'size="7" maxLength="6"'.$g_form_option." class=\"money_num\" style='text-align:right; ime-mode:disabled;'");		  $form->addElement("text","form_account_rate[$i]","",'size="7" maxLength="6" '.$g_form_option." style='text-align:right; ime-mode:disabled;'");
		}
		$form->addGroup($form_aprice_div0[$i], "form_aprice_div[$i]","","<br>");

		//¸ýºÂÎÁ¤Î¶õÇò
		$text = NULL;
		$text[] =& $form->createElement(
	        "text","name","",
	        "size=\"7\" maxLength=\"10\" 
	        style=\"color : #000000; 
	        border : #ffffff 1px solid; 
	        background-color: #ffffff; 
	        text-align: right\" readonly'"
	    );
		$form->addGroup($text, "form_br","","");

/*
		$form->addElement("text","form_account_price[$i]","",'size="7" maxLength="6"'.$g_form_option." style='text-align:right; ime-mode:disabled;' onKeyup=\"Mult_double4('form_goods_num1','form_sale_price','form_sale_amount','form_trade_price','form_trade_amount','form_issiki','$coax');\" ");
		$form->addElement("text","form_account_rate[$i]","",'size="7" maxLength="6" '.$g_form_option." style='text-align:right; ime-mode:disabled;' onKeyup=\"Mult_double4('form_goods_num1','form_sale_price','form_sale_amount','form_trade_price','form_trade_amount','form_issiki','$coax');\" ");
*/

	//}else{

		//Âå¹Ô¤Î¾ì¹ç¡¢Âå¹ÔÀè¤Î´Ý¤á¶èÊ¬¤òJS¤ØÁ÷¤ë
		if($daiko_check != "1" ){
			$d_coax = $daiko_coax;
		}

		//£Æ£Ã
		//±Ä¶È¸¶²Á
		$form_cost_price[$i][] =& $form->createElement(
		        "text","1","",
		        "size=\"9\" maxLength=\"8\"
		        class=\"money\"
		        onKeyup=\"$mult_double\"
		        style=\"$g_form_style;text-align: right; $style\"
		        $type"
		    );
		    $form_cost_price[$i][] =& $form->createElement(
		        "text","2","","size=\"1\" maxLength=\"2\" 
		        onKeyup=\"$mult_double\"
		        style=\"$g_form_style;text-align: left; $style\"
		        $type"
		    );
	    $form->addGroup( $form_cost_price[$i], "form_trade_price[$i]", "",".");

		//¸¶²Á¹ç·×³Û
	    $form->addElement(
	        "text","form_trade_amount[$i]","",
	        "size=\"17\" maxLength=\"10\" 
	        style=\"color : #000000; 
	        border : #ffffff 1px solid; 
	        background-color: #ffffff; 
	        text-align: right\" readonly'"
	    );

		//Çä¾åÃ±²Á
		$form_sale_price[$i][] =& $form->createElement(
		        "text","1","",
		        "size=\"9\" maxLength=\"8\"
		        class=\"money\"
		        onKeyup=\"$mult_double\"
		        style=\"$g_form_style;text-align: right; $style\"
		        $type"
		    );
		    $form_sale_price[$i][] =& $form->createElement(
		        "text","2","","size=\"1\" maxLength=\"2\" 
		        onKeyup=\"$mult_double\"
		        style=\"$g_form_style;text-align: left; $style\"
		        $type"
		    );
	    $form->addGroup( $form_sale_price[$i], "form_sale_price[$i]", "",".");

		//Çä¾å¹ç·×³Û
		$form->addElement("text","form_sale_amount[$i]","",'class="amount"');

		//¸ýºÂÎÁ
		$form_aprice_div0[$i][] =& $form->createElement("radio",NULL,NULL, "<font color=#555555>¤Ê¤·</font>","1");
		//¾Ò²ð¸ýºÂÀè»ØÄêÈ½Äê
		if($client_ac_id == NULL){
			//¸ýºÂÎÁ»ØÄêÉÔ²Ä
			$form_aprice_div0[$i][] =& $form->createElement("radio",NULL,NULL, "<font color=#555555>¸ÇÄê³Û</font>","2","disabled");
			$form_aprice_div0[$i][] =& $form->createElement("radio",NULL,NULL, "<font color=#555555>Çä¾å¤Î</font>","3","disabled");
			$form->addElement("text","form_account_price[$i]","",'size="7" maxLength="6"'.$g_form_option." class=\"money_num\" style='text-align:right; ime-mode:disabled; background-color:gainsboro;' disabled");
	        $form->addElement("text","form_account_rate[$i]","",'size="7" maxLength="6" '.$g_form_option." style='text-align:right; ime-mode:disabled; background-color:gainsboro;' disabled");
		}else{
			//¸ýºÂÎÁ»ØÄê²Ä
			$form_aprice_div0[$i][] =& $form->createElement("radio",NULL,NULL, "<font color=#555555>¸ÇÄê³Û</font>","2");
			$form_aprice_div0[$i][] =& $form->createElement("radio",NULL,NULL, "<font color=#555555>Çä¾å¤Î</font>","3");
			$form->addElement("text","form_account_price[$i]","",'size="7" maxLength="6"'.$g_form_option." class=\"money_num\" style='text-align:right; ime-mode:disabled;'");
	        $form->addElement("text","form_account_rate[$i]","",'size="7" maxLength="6" '.$g_form_option." style='text-align:right; ime-mode:disabled;'");
		}
		$form->addGroup($form_aprice_div0[$i], "form_aprice_div[$i]","","<br>");

		//¸ýºÂÎÁ¤Î¶õÇò
		$text = NULL;
		$text[] =& $form->createElement(
	        "text","name","",
	        "size=\"7\" maxLength=\"10\" 
	        style=\"color : #000000; 
	        border : #ffffff 1px solid; 
	        background-color: #ffffff; 
	        text-align: right\" readonly'"
	    );
		$form->addGroup($text, "form_br","","");

	//}
	
		//Á°¼õÁê»¦³Û
		$form_ad_offset_radio = NULL;
		$form_ad_offset_radio[$i][] =& $form->createElement("radio", NULL, NULL, "¤Ê¤·", "1", "onClick=\"ad_offset_radio_disable($i);\"");
		$form_ad_offset_radio[$i][] =& $form->createElement("radio", NULL, NULL, "¤¢¤ê", "2", "onClick=\"ad_offset_radio_disable($i);\"");
		$form->addGroup($form_ad_offset_radio[$i], "form_ad_offset_radio[$i]", "Á°¼õÁê»¦¥Õ¥é¥°");
		$form->addElement("text", "form_ad_offset_amount[$i]", "", 
			"size=\"11\" maxLength=\"9\" ".$g_form_option." class=\"money\" style='text-align:right; ime-mode:disabled; 
'"
		);

	/*
	//ÆâÌõ
	$form->addElement(
		"link","form_breakdown[$i]","","#","ÆâÌõ",
		"onClick=\"javascript:return Submit_Page2('./2-1-116.php?flg=$flg&client_id=$client_id&contract_id=$get_con_id&break_row=$i'); \""
	);
	*/

}

$form->addElement("hidden", "goods_search_row");    //¾¦ÉÊ¥³¡¼¥ÉÆþÎÏ¹Ô    
$form->addElement("hidden", "entry_flg");           //ÅÐÏ¿¥Ü¥¿¥ó²¡²¼¥Õ¥é¥°    
$form->addElement("hidden", "delete_flg");          //ºï½ü¥Ü¥¿¥ó²¡²¼¥Õ¥é¥°    
$form->addElement("hidden", "hdn_client_id");       //ÆÀ°ÕÀè
$form->addElement("hidden", "hdn_daiko_id");        //Âå¹ÔID
$form->addElement("hidden", "hdn_flg");             //ÄÉ²Ã¡¦¹¹¿·È½ÊÌ¥Õ¥é¥°
$form->addElement("hidden", "hdn_con_id");          //·ÀÌó¾ðÊóID
$form->addElement("hidden", "client_search_flg");   //ÆÀ°ÕÀè¸¡º÷¥Õ¥é¥°
$form->addElement("hidden", "daiko_search_flg");    //¼õÂ÷Àè¸¡º÷¥Õ¥é¥°
$form->addElement("hidden", "hdn_return_flg");      //Ìá¤ëÉ½¼¨È½Äê¥Õ¥é¥°
$form->addElement("hidden", "hdn_get_flg");         //·ÀÌó³µÍ×¤ÎÌá¤ë¥Ü¥¿¥óÁ«°ÜÈ½Äê¥Õ¥é¥°
$form->addElement("hidden", "hdn_c_check_flg");     //ÊÑÂ§ÆüÉü¸µÈ½Äê¥Õ¥é¥°
$form->addElement("hidden", "copy_value_flg");      //Ê£¼ÌÄÉ²Ã¤Î¼¡¤ØÁ°¤Ø¥Ü¥¿¥ó²¡²¼È½Äê¥Õ¥é¥°
$form->addElement("hidden", "clear_flg");           //¥¯¥ê¥¢È½Äê¥Õ¥é¥°
$form->addElement("hidden", "clear_line");          //¥¯¥ê¥¢¤¹¤ë¹Ô
$form->addElement("hidden", "duplicat_ok");         //½ÅÊ£ÅÁÉ¼OK
$form->addElement("hidden", "advance_ok");          //Á°¼õÁê»¦OK

//°Ê²¼¤Ï²èÌÌ¤ËÉ½¼¨¤·¤Ê¤¤¡Ê¥¨¥é¡¼É½¼¨¤Î¤¿¤á¤ËºîÀ®¡Ë
$form->addElement("text","sale_rate_sum","");
$form->addElement("text","staff_uniq","");
$form->addElement("text","goods_enter","");
$form->addElement("text","hensoku_err","");

/************************************************/

//¥Ü¥¿¥ó
$form->addElement("button","copy_button","¥³¥Ô¡¼","");
$form->addElement("button","entry_button","ÅÐ¡¡Ï¿","onClick=\"return Dialogue_2('ÅÐÏ¿¤·¤Þ¤¹¡£','2-1-104.php?client_id=$client_id',true,'entry_flg');\" $disabled");
$form->addElement("button","form_back","Ìá¡¡¤ë","onClick=\"location.href='./2-1-115.php?client_id=$client_id&return_flg=true&get_flg=$get_flg'\"");

//ÊÑ¹¹²èÌÌ¤Î¾ì¹çÉ½¼¨
if($flg == 'chg'){
	$form->addElement("button","delete_button","ºï¡¡½ü","onClick=\"return Dialogue_2('ºï½ü¤·¤Þ¤¹¡£','2-1-104.php?client_id=$client_id',true,'delete_flg');\" $del_disabled");
}

$form->addElement("submit","hyouji","É½¡¡¼¨","");

$form->addElement("button","clear_button","Á´¥¯¥ê¥¢","onClick=\"insert_row('clear_flg');\"");

//Ê£¼ÌÄÉ²Ã¤Î¾ì¹çÉ½¼¨
if($flg == 'copy'){
	//¼¡¤Ø¥Ü¥¿¥ó
	if($next_id != null){
	    $form->addElement("button","next_button","¼¡¡¡¤Ø","onClick=\"location.href='./2-1-104.php?flg=$flg&client_id=$client_id&contract_id=$next_id&return_flg=true'\"");
	}else{
	    $form->addElement("button","next_button","¼¡¡¡¤Ø","disabled");
	}
	//Á°¤Ø¥Ü¥¿¥ó
	if($back_id != null){
	    $form->addElement("button","back_button","Á°¡¡¤Ø","onClick=\"location.href='./2-1-104.php?flg=$flg&client_id=$client_id&contract_id=$back_id&return_flg=true'\"");
	}else{
	    $form->addElement("button","back_button","Á°¡¡¤Ø","disabled");
	}
}

//ÊÑ¹¹¡¦°ìÍ÷
$form->addElement("button","change_button","ÊÑ¹¹¡¦°ìÍ÷","onClick=\"location.href='2-1-111.php'\"");
//°ì³çÄûÀµ(¥Ø¥Ã¥À¡¼)
//$form->addElement("button","all_button","°ì³çÄûÀµ","onClick=\"location.href='2-1-114.php'\"");
//ÅÐÏ¿(¥Ø¥Ã¥À¡¼)
$form->addElement("button","new_button","ÅÐ¡¡Ï¿",$g_button_color."onClick=\"location.href='2-1-104.php?flg=add'\"");


//Á°¼õ¶â½¸·×¥Ü¥¿¥ó
$form->addElement("submit","form_ad_sum_btn","½¸¡¡·×");
//Á°¼õ¶â»Ä¹â
$form->addElement("static", "form_ad_rest_price","Á°¼õ¶â»Ä¹â");


/***************
ÊÑÂ§Æü¥ê¥ó¥¯
****************/
$form->addElement(
    "link","form_irr_day","","#","ÊÑÂ§Æü",
	"onClick=\"javascript:return Submit_Page2('./2-1-105.php?flg=$flg&client_id=$client_id&contract_id=$get_con_id'); \""
);

/****************************/
//ÉôÉÊÄêµÁ(ÆâÌõ²èÌÌ)
/****************************/
/*
//·ÀÌóÅÐÏ¿¤Î¹Ô¿ôÊ¬
for($i=1;$i<=5;$i++){
	//ÆâÌõÅÐÏ¿¤Î¹Ô¿ôÊ¬
	for($j=1;$j<=5;$j++){
		//¾¦ÉÊ¥³¡¼¥É
		$form->addElement("hidden","break_goods_cd[$i][$j]","");
		//¾¦ÉÊÌ¾
		$form->addElement("hidden","break_goods_name[$i][$j]","");
		//¾¦ÉÊ¿ô
		$form->addElement("hidden","break_goods_num[$i][$j]","");
		//¾¦ÉÊID
		$form->addElement("hidden","hdn_bgoods_id[$i][$j]","");
		//ÉÊÌ¾ÊÑ¹¹¥Õ¥é¥°
		$form->addElement("hidden","hdn_bname_change[$i][$j]","");

		//±Ä¶È¸¶²Á
		$form->addElement("hidden","break_trade_price[$i][$j][1]","");
		$form->addElement("hidden","break_trade_price[$i][$j][2]","");
		//¸¶²Á¹ç·×
		$form->addElement("hidden","break_trade_amount[$i][$j]","");
		//Çä¾åÃ±²Á
		$form->addElement("hidden","break_sale_price[$i][$j][1]","");
		$form->addElement("hidden","break_sale_price[$i][$j][2]","");
		//Çä¾å¹ç·×
		$form->addElement("hidden","break_sale_amount[$i][$j]","");
	}
}
*/

//¸å¤Çºï½ü
$form->addElement("button","form_back_trade","Ìá¡¡¤ë","onClick=\"location.href='./2-1-104.php?flg=add'\"");

?>
